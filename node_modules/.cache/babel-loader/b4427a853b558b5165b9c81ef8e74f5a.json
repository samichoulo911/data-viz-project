{"remainingRequest":"/home/sam/Documents/Poly/data-viz-project/node_modules/babel-loader/lib/index.js!/home/sam/Documents/Poly/data-viz-project/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/home/sam/Documents/Poly/data-viz-project/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/sam/Documents/Poly/data-viz-project/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/sam/Documents/Poly/data-viz-project/src/components/Barchart.vue?vue&type=template&id=a9237b4a","dependencies":[{"path":"/home/sam/Documents/Poly/data-viz-project/src/components/Barchart.vue","mtime":1624326781000},{"path":"/home/sam/Documents/Poly/data-viz-project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sam/Documents/Poly/data-viz-project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/sam/Documents/Poly/data-viz-project/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1616796459000},{"path":"/home/sam/Documents/Poly/data-viz-project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sam/Documents/Poly/data-viz-project/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jayB9IGZyb20gInZ1ZSI7CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCB7CiAgICBpZDogX2N0eC5wcm9wcy5pZCwKICAgIHN0eWxlOiB7CiAgICAgICJmb250LWZhbWlseSI6ICInUm9ib3RvJywgc2Fucy1zZXJpZiIKICAgIH0KICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsiaWQiXSk7Cn0="},{"version":3,"sources":["/home/sam/Documents/Poly/data-viz-project/src/components/Barchart.vue"],"names":[],"mappings":";;uBACI,YAAA,CAAoE,KAApE,EAAoE;AAA9D,IAAA,EAAE,EAAE,IAAA,CAAA,KAAA,CAAM,EAAoD;AAAhD,IAAA,KAAyC,EAAzC;AAAA,qBAAA;AAAA;AAAgD,GAApE,E,IAAA,E;;AAAA,I,MAAA,C","sourcesContent":["<template>\n    <div :id=\"props.id\" style=\"font-family: 'Roboto', sans-serif\"></div>\n</template>\n\n<script>\nimport { defineComponent, watch } from 'vue'\nimport * as d3 from 'd3'\nimport d3Tip from 'd3-tip'\n\nexport default defineComponent({\n    props: {\n        data: Array,\n        title: String,\n        statName: String,\n        id: String\n    },\n    setup(props) {\n        const size = { width: 300, height: 130 };\n        const margin = { left: 40, right: 15, top: 30, bottom: 90 };\n\n        function createSvg() {\n            d3.select(`#${props.id}`)\n                .append('svg')\n                .attr('width', size.width + margin.left + margin.right)\n                .attr('height', size.height + margin.top + margin.bottom)\n                .append('g')\n                .attr('transform', `translate(${margin.left}, ${margin.top})`)\n                .attr('id', 'content-g');\n        }\n\n        function createRectangles(data, xScale, yScale, colorScale, toolTip, graphDimensions) {\n            d3.select(`#${props.id}`)\n                .select('#content-g')\n                .selectAll('.bars')\n                .data(data)\n                .join('rect')\n                .attr('fill', element => colorScale(element.x))\n                .attr('width', xScale.bandwidth())\n                .attr('height', element => graphDimensions.height - yScale(+element.y))\n                .attr('x', element => xScale(element.x))\n                .attr('y', element => yScale(element.y))\n                .attr('stroke', 'none')\n                .attr('stroke-width', '0')\n                .attr('opacity', '0.7')\n                .attr('id', element => `bar-${element.x.replace(/\\s/g,'')}`)\n                .on('mouseover', (event, value) => toolTip.show(value, event.target))\n                .on('mouseout', (event, value) => toolTip.hide(value, event.target))\n        }\n\n        function createTitle(svgRoot) {\n            const text =\n                svgRoot.select('#content-g')\n                    .append('text')\n                    .text(props.title)\n                    .attr('fill', 'black')\n                    .attr('font-size', '18px')\n\n            const textRect = text.node().getBoundingClientRect()\n            text.attr('x', (size.width - textRect.width) / 2).attr('y', -15);\n        }\n\n        function rotateLabels(svgRoot) {\n            svgRoot.selectAll('.tick')\n                .select('text')\n                .attr('transform', 'rotate(45)')\n                .attr('font-size', '12px')\n                .style('text-anchor', 'start');\n        }\n\n        function createXScale(data, graphDimensions) {\n            const scale = d3.scaleBand().padding(0.25);\n            scale.domain(data.map(element => element.x)).range([0, graphDimensions.width]);\n            return scale;\n        }\n\n        function createYScale(data, graphDimensions) {\n            const scale = d3.scaleLinear();\n            const maxY = Math.max(...data.map(element => element.y));\n            scale.domain([0, maxY]).range([graphDimensions.height, 0]);\n            return scale;\n        }\n\n        function createColorScale(data) {\n            const scale = d3.scaleOrdinal();\n            scale.domain(data.map(element => element.x)).range(d3.schemeCategory10);\n            return scale;\n        }\n\n        function getTooltipContent(element) {\n            return `<div style=\"font-family: 'Roboto', sans-serif\">\n            <span>${element.x}<br>\n            ${props.statName}: ${element.y}</span>\n            </div>`\n        }\n\n        function drawXAxis(xScale, svgRoot, graphDimensions) {\n            svgRoot.select('#content-g')\n                .append('g')\n                .attr('class', 'x.axis')\n                .attr('transform', `translate(0 ${graphDimensions.height})`)\n                .call(d3.axisBottom(xScale));\n        }\n\n        function drawYAxis(yScale, svgRoot, graphDimensions) {\n            svgRoot.select('#content-g')\n                .append('g')\n                .attr('class', 'y.axis')\n                .call(d3.axisLeft(yScale).ticks(5))\n        }\n\n        watch(() => props.data, () => {\n            const xScale = createXScale(props.data, size);\n            const yScale = createYScale(props.data, size);\n            const colorScale = createColorScale(props.data);\n\n            createSvg();\n            const svg = d3.select(`#${props.id}`).select('svg');\n            const tooltip = d3Tip().attr('class', 'd3-tip').html(getTooltipContent);\n            svg.call(tooltip);\n\n            createRectangles(props.data, xScale, yScale, colorScale, tooltip, size);\n\n            createTitle(svg);\n\n            drawXAxis(xScale, svg, size);\n            rotateLabels(svg);\n            drawYAxis(yScale, svg, size);\n        });\n\n        return {\n          props,\n        }\n    },\n})\n</script>\n\n<style>\n/* \n\nDO NOT MODIFY. \n\nExample CSS file provided with d3-tip library.\nCredits : https://rawgit.com/Caged/d3-tip/master/examples/example-styles.css \n\n*/\n\n.d3-tip {\n    line-height: 1;\n    font-weight: bold;\n    padding: 12px;\n    background: rgba(0, 0, 0, 0.8);\n    color: #fff;\n    border-radius: 2px;\n    pointer-events: none;\n  }\n  \n  /* Creates a small triangle extender for the tooltip */\n  .d3-tip:after {\n    box-sizing: border-box;\n    font-size: 10px;\n    width: 100%;\n    line-height: 1;\n    color: rgba(0, 0, 0, 0.8);\n    position: absolute;\n    pointer-events: none;\n  }\n  \n  /* Northward tooltips */\n  .d3-tip.n:after {\n    content: \"\\25BC\";\n    margin: -1px 0 0 0;\n    top: 100%;\n    left: 0;\n    text-align: center;\n  }\n  \n  /* Eastward tooltips */\n  .d3-tip.e:after {\n    content: \"\\25C0\";\n    margin: -4px 0 0 0;\n    top: 50%;\n    left: -8px;\n  }\n  \n  /* Southward tooltips */\n  .d3-tip.s:after {\n    content: \"\\25B2\";\n    margin: 0 0 1px 0;\n    top: -8px;\n    left: 0;\n    text-align: center;\n  }\n  \n  /* Westward tooltips */\n  .d3-tip.w:after {\n    content: \"\\25B6\";\n    margin: -4px 0 0 -1px;\n    top: 50%;\n    left: 100%;\n  }\n</style>\n"],"sourceRoot":""}]}